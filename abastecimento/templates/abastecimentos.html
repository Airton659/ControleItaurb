{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Título -->
    <title>Controle Abastecimento - Itaurb</title>

    <!-- Favicon -->
    <link rel="icon" href="{% static 'img/core-img/favicon1.ico' %}">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="{% static 'site.css' %}">

</head>



<body>

   

    <!-- Preloader -->
    <div id="preloader">
        <i class="circle-preloader"></i>
        <img src="{% static 'img/core-img/pizza1.png' %}" alt="">
    </div>

    <!-- Search Wrapper -->
    <div class="search-wrapper">
        <!-- Close Btn -->
        <div class="close-btn"><i class="fa fa-times" aria-hidden="true"></i></div>

        <div class="container">
            <div class="row">
                <div class="col-12">
                    <form action="{% url 'buscar' %}" >
                        <input type="search" name="buscar" placeholder="O que está procurando...">
                        <button type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ##### Header Area Start ##### -->
    <header class="header-area">

        <!-- Top Header Area -->
        <div class="top-header-area">
            <div class="container h-100">
                <div class="row h-100 align-items-center justify-content-between">
                    <!-- Breaking News -->
                    <div class="col-12 col-sm-6">
                        <h5> Bem vindo!</h5>                        
                    </div>

                    <!-- Top Social Info -->
                    <div class="col-12 col-sm-6">                        
                    </div>
                </div>
            </div>
        </div>

        <!-- Navbar Area -->
        <div class="delicious-main-menu">
            <div class="classy-nav-container breakpoint-off">
                <div class="container">
                    <!-- Menu -->
                    <nav class="classy-navbar justify-content-between" id="deliciousNav">

                        <!-- Logo -->
                        <a class="nav-brand" href="{% url 'veiculos' %}"><img src="{% static 'img/core-img/logo1.png' %}" alt="" width="180px" ></a>


                        <!-- Navbar Toggler -->
                        <div class="classy-navbar-toggler">
                            <span class="navbarToggler"><span></span><span></span><span></span></span>
                        </div>

                        <!-- Menu -->
                        <div class="classy-menu">

                            <!-- close btn -->
                            <div class="classycloseIcon">
                                <div class="cross-wrap"><span class="top"></span><span class="bottom"></span></div>
                            </div>

                            <!-- Nav Start -->
                             <!-- Nav Start -->
                        <div class="classynav">
                            <ul>
                                <li><a href="{% url 'veiculos' %}">Veiculos</a></li>
                                <li><a href="{% url 'abastecimento' %}">Novo Abastecimento</a></li>  
                                <li><a href="{% url 'logout' %}">Logout</a></li>
                                                               
                            </ul>                            
                                <!-- Formulario de busca -->
                                <div class="search-btn">
                                    <i class="fa fa-search" aria-hidden="true">         BUSCA</i>
                                </div>
                                <!-- Formulario de busca -->

                            </div>
                            <!-- Nav End -->
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ##### Header Area End ##### -->

    <!-- ##### Best Receipe Area Start ##### -->
    <section >
        <div >
            <div>              
                <!-- Single Best Receipe Area -->
                <div style="padding: 2%; width: 100%;">                   
                    <table border ='1'  id="id_da_tabela" style="width:100%" class="table table-striped table-bordered" >
                        <thead>
                            <tr align=center>
                                <th>Data de Abastecimento</th>
                                <th>Kilometragem</th>
                                <th>Litros</th>
                                <th>Valor</th>
                                <th>Posto</th>
                                <th>Motorista</th>
                                <th>Combustivel</th>
                                <th>Usuario de criação</th>
                                <th>Data de Registro</th>                                
                            </tr>                          
                        </thead>
                        <tbody>
                            {% if abastecimentos %}
                            {% for abastecimento in abastecimentos %}
                            <tr align=center>
                                <td >{{abastecimento.data_abastecimento}}</td>
                                <td>{{abastecimento.km}}</td>
                                <td>{{abastecimento.litros}}</td>
                                <td>{{abastecimento.valor}}</td>
                                <td>{{abastecimento.posto}}</td>
                                <td>{{abastecimento.motorista}}</td>
                                <td>{{abastecimento.combustivel}}</td>
                                <td>{{abastecimento.usuario_de_criacao}}</td>
                                <td>{{abastecimento.data_registro}}</td>                                
                            </tr>
                            {% endfor %}
                            {% else %}
                            {% endif %}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th>Data de Abastecimento</th>
                                <th>Kilometragem</th>
                                <th>Litros</th>
                                <th>Valor</th>
                                <th>Posto</th>
                                <th>Motorista</th>
                                <th>Combustivel</th>
                                <th>Usuario de criação</th>
                                <th>Data de Registro</th> 
                            </tr>
                        </tfoot>
                    </table>
                    <button onclick="ExportToExcel('xlsx')">Exportar para Excel</button>
                </div> 
            </div>
        </div>
    </section>
    <!-- ##### Best Receipe Area End ##### -->

    <!-- ##### Footer Area Start ##### -->
    <footer class="footer-area">
        <div class="container h-100">
            <div class="row h-100">
                <div class="col-12 h-100 d-flex flex-wrap align-items-center justify-content-between">                 
                    <div class="footer-logo">
                        <a href="index.html"><img src="img/core-img/logo.png" alt=""></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- ##### Footer Area Start ##### -->

   <!-- ##### All Javascript Files ##### -->
    <!-- jQuery-2.2.4 js -->
    <script src="{% static 'js/jquery/jquery-2.2.4.min.js' %}"></script>
    <!-- Popper js -->
    <script src="{% static 'js/bootstrap/popper.min.js' %}"></script>
    <!-- Bootstrap js -->
    <script src="{% static 'js/bootstrap/bootstrap.min.js' %}"></script>
    <!-- All Plugins js -->
    <script src="{% static 'js/plugins/plugins.js' %}"></script>
    <!-- Active js -->
    <script src="{% static 'js/active.js' %}"></script>
    <link rel="stylesheet" href="//cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
    <script src="//cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js"></script>
    <script>
        $(document).ready( function () {
            $('#id_da_tabela').DataTable({
                paging: false,
                ordering: true,
                info: true,
                language: {
                    decimal: ',',
                    thousands: '.',
                    lengthMenu: 'Mostrando _MENU_ registros por página',
                    zeroRecords: 'Nada encontrado',
                    info: 'Mostrando Página _PAGE_ de _PAGES_',
                    infoEmpty: 'Nenhum registro disponível',
                    infoFiltered: '(Filtrado de _MAX_ registros totais)',
                }, 
                initComplete: function () {
                    this.api()
                        .columns()
                        .every(function () {
                            var column = this;
                            var select = $('<select style="width:100%"><option value=""></option></select>')
                                .appendTo($(column.footer()).empty())
                                .on('change', function () {
                                    var val = $.fn.dataTable.util.escapeRegex($(this).val());
        
                                    column.search(val ? '^' + val + '$' : '', true, false).draw();
                                });
        
                            column
                                .data()
                                .unique()
                                .sort()
                                .each(function (d, j) {
                                    select.append('<option value="' + d + '">' + d + '</option>');
                                });
                        });
                },          
            });
            
                    
            } );
            function ExportToExcel(type, fn, dl) {
                var elt = document.getElementById('id_da_tabela');
                var wb = XLSX.utils.table_to_book(elt, { sheet: "sheet1" });
                return dl ?
                XLSX.write(wb, { bookType: type, bookSST: true, type: 'base64' }):
                XLSX.writeFile(wb, fn || ('MySheetName.' + (type || 'xlsx')));
            }
            
        
    </script>
</body>

</html>


